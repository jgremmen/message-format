plugins {
  id 'idea'
  id 'java-library'
  id 'maven-publish'
  id 'nebula.optional-base' version '5.0.3'
  id 'jacoco'
  id 'signing'
}


description 'Message Format Library'
group 'de.sayayi.lib'
version '0.2.0'


sourceSets {
  java6
  java8
  main {
    resources {
      srcDir 'src/java6/resources'
      srcDir 'src/java8/resources'
    }
  }
}


apply from: file('gradle/versions.gradle')
apply from: file('gradle/javadoc.gradle')
apply from: file('gradle/quality.gradle')
apply from: file('gradle/publishing.gradle')


compileJava6Java {
  sourceCompatibility = 1.6
  targetCompatibility = 1.6
}


compileJava8Java {
  sourceCompatibility = 1.8
  targetCompatibility = 1.8
}


compileJava {
  sourceCompatibility = 1.6
  targetCompatibility = 1.6
}


repositories {
  jcenter()
}


dependencies {
  annotationProcessor "org.projectlombok:lombok:"
  java6AnnotationProcessor "org.projectlombok:lombok:"

  compileOnly 'org.projectlombok:lombok:'
  compileOnly 'org.jetbrains:annotations:'

  java6CompileOnly 'org.projectlombok:lombok:'
  java6CompileOnly 'org.jetbrains:annotations:'
  java6Implementation 'joda-time:joda-time:'

  java8CompileOnly 'org.jetbrains:annotations:'

  java8Implementation files(sourceSets.java6.output.classesDirs) {
    builtBy compileJava6Java
  }

  implementation files(sourceSets.java8.output.classesDirs) {
    builtBy compileJava8Java
  }

  implementation files(sourceSets.java6.output.classesDirs) {
    builtBy compileJava6Java
  }

  testCompile 'junit:junit:'
  testCompile 'joda-time:joda-time:'
  testCompileOnly 'org.jetbrains:annotations:'
}


jar {
  from sourceSets.java6.output
  from sourceSets.java8.output
}
